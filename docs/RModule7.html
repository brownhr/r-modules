<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Bivariate Analysis in R</title>

<script src="site_libs/header-attrs-2.14/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />
<link rel="shortcut icon" href="aoa_r.svg" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Modules</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">
    <span class="fa fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="Syllabus.html">
    <span class="fa fa-file-text"></span>
     
    Syllabus
  </a>
</li>
<li>
  <a href="about.html">
    <span class="fa fa-info"></span>
     
    About
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    R Modules
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="RModule1.html">R Module 1</a>
    </li>
    <li>
      <a href="RModule2.html">R Module 2</a>
    </li>
    <li>
      <a href="RModule3.html">R Module 3</a>
    </li>
    <li>
      <a href="RModule4.html">R Module 4</a>
    </li>
    <li>
      <a href="RModule5.html">R Module 5</a>
    </li>
    <li>
      <a href="RModule6.html">R Module 6</a>
    </li>
    <li>
      <a href="RModule7.html">R Module 7</a>
    </li>
    <li>
      <a href="RModule8.html">R Module 8</a>
    </li>
    <li>
      <a href="RModule9.html">R Module 9</a>
    </li>
    <li>
      <a href="RModule10.html">R Module 10</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Bivariate Analysis in R</h1>

</div>


<div id="quantifying-more-than-one-variable" class="section level1">
<h1>Quantifying More than One Variable</h1>
<p>So far we’ve only focused on exploring a single variable by
considering its frequency, histogram, and descriptive statistics. Doing
this allows us to know a great deal about how some set of measured
values, i.e., a sample, are distributed across a set of possible values
and how those values are dispersed around some notion of the ‘middle’ of
the data. That’s a lot of work, but what about moving beyond thinking
only about a single variable?</p>
<p>Often, we want to consider the relationship between a pair of
variables and the effect that one variable may have on the values of
another – this is known as bivariate analysis, and we’ll explore it this
week with our trusty North Carolina employment data.</p>
<p>For this Module, we’ll use the NC Shapefile from previous R Modules
(<code>NC_REGION.shp</code>), which contains four important “employment”
variables (<code>MNEM2000</code>, <code>MNEM1990</code>,
<code>TOTJOB2000</code>, <code>TOTJOB1990</code>), and two variables for
population (<code>POP2000</code> and <code>POP1990</code>).</p>
<pre class="r"><code>library(sf)
library(tidyverse)

NC &lt;- read_sf(&quot;data/NC_REGION.shp&quot;)</code></pre>
<p>Let’s create a plot of just the “geometry” of the shapefile, in order
to make sure it loaded correctly.</p>
<pre class="r"><code>plot(st_geometry(NC))</code></pre>
<p><img src="RModule7_files/figure-html/plot-1.png" width="672" /></p>
<div id="questions" class="section level2">
<h2>Questions</h2>
<p>As in previous R Modules, write up this document as an R Markdown
report, and export the results to a <code>.pdf</code>. Include both your
results, your R code, and the answers to the questions.</p>
<ol style="list-style-type: decimal">
<li>Create a histogram for the <code>POP2000</code> variable. Include
the histogram itself, the density, the mean and median lines, and the
axis labels and title. If you’re using base R, look into the
<code>probability</code> argument for the <code>hist()</code>
function.</li>
</ol>
<hr />
</div>
</div>
<div id="covariance" class="section level1">
<h1>Covariance</h1>
<p>An important consideration in our analysis is <em>co-variation</em>,
that is, how the values of one variable change with the values of
another. In our case, it is necessary to consider that the number of
manufacturing jobs likely changes (<em>co-varies</em>) with population;
i.e., counties with a higher population likely have a larger number of
manufacturing jobs. Note that we’re also assuming <em>causality</em> in
our speculative statement, that manufacturing depends to some degree on
population values (e.g., larger population centers have more need for
manufacturing jobs, too).</p>
<p>Before we formally test covariance, we should establish if these
variables actually co-vary; let’s try a basic scatter plot:</p>
<pre class="r"><code>library(ggplot2)

ggplot(
  data = NC,
  mapping = aes(x = MNEM2000, y = POP2000)
) +
  geom_point() +
  labs(
    x = &quot;Manufacturing Jobs&quot;,
    y = &quot;Population&quot;,
    # The &quot;\n&quot; character is a &quot;newline&quot; escape character and can be used to
    # break up long titles onto more than one line.
    title = &quot;Covariance of Manufacturing Jobs vs.\nPopulation in 2000&quot;
  )</code></pre>
<p><img src="RModule7_files/figure-html/scatter-1-1.png" width="672" /></p>
<p>Do we have visual evidence of a relationship? Maybe, but because the
distribution of the observations clusters so many towards the origin, it
makes it difficult to see the actual pattern. We can apply a
transformation to each variable to see what’s going on:</p>
<pre class="r"><code>ggplot(
  data = NC,
  mapping = aes(
    x = sqrt(MNEM2000),
    y = sqrt(POP2000)
  )
) +
  geom_point()</code></pre>
<p><img src="RModule7_files/figure-html/scatter-2-1.png" width="672" /></p>
<p>Much better; the <code>sqrt()</code> function doesn’t change small
values as much as it does large ones. The outliers were brought “closer
in” but the overall pattern is the same, just easier to visually
interpret. Note that our data trends from lower left to upper right in a
generally linear manner. This is visual evidence to suggest linear
covariance, but we need to formally test this relationship. For this,
we’ll use <em>Pearson’s R</em></p>
<hr />
<div id="pearsons-r" class="section level2">
<h2>Pearson’s R</h2>
<p>Testing covariance and performing bivariate analysis in R are
fortunately quite easy; most of the basic functions we need are in the
<code>base</code> package, which comes pre-loaded when we start R
Studio. However, we’ll use some functions from the <code>corrr</code>
package, as they work better with “tidy” format data (see <a
href="https://www.tidyverse.org">the Tidyverse</a>). We’ll use
<code>dplyr</code> (included when we load <code>tidyverse</code>) to
choose our two columns we wish to correlate.</p>
<pre class="r"><code>library(corrr)

cor &lt;- NC %&gt;%
  # We&#39;ll drop the &#39;geometry&#39; on the fly, as it can potentially break the
  # function. We&#39;re not actually getting rid of it from our original data, of
  # course.
  st_drop_geometry() %&gt;%
  select(MNEM2000, POP2000) %&gt;%
  correlate(use = &quot;pairwise.complete.obs&quot;,
            method = &quot;pearson&quot;)

# The fashion() function in corrr is used to format the results of correlation
# for printing; all it does is make things look nicer in our output!

fashion(cor, decimals = 4)</code></pre>
<pre><code>##       term MNEM2000 POP2000
## 1 MNEM2000            .8702
## 2  POP2000    .8702</code></pre>
<p>The Pearson’s R for these two variables seems like a strongly
positive result – as the population increases, so does manufacturing
employment. We might also like to explore correlations between numerous
variables at the same time; it’s easy to do with the <code>corrr</code>
package and <code>dplyr</code>. Because we’re only looking at numeric
data, we can filter out both the <code>geometry</code> column, as well
as any character columns:</p>
<pre class="r"><code>NC_filter &lt;- NC %&gt;% 
  
  # Again, we need to drop the geometry
  st_drop_geometry() %&gt;% 
  
  # Using select_if, we can choose only the columns that are numeric
  select_if(is.numeric) %&gt;%
  
  # Finally, we can choose the columns we actually want to correlate. Note that
  # this is a bit redundant with the `select_if()` above, but I wanted to show
  # how to select columns programmatically with a logical test.
  select(
    c(
      POP2000,
      MNEM2000,
      HOUSEHOLDS,
      MEDIANRENT,
      TOTJOB2000,
      WHITE,
      BLACK,
      AMERI_ES,
      ASIAN_PI,
      OTHER,
      HISPANIC
    )
  )</code></pre>
<p>Now, we can correlate our data:</p>
<pre class="r"><code># We can plot a correlogram with the GGally package. Install and load it, and use the `ggcorr()` function on our filtered data to get a plot
library(GGally)

NC_filter %&gt;% 
  # We can set a diverging color palette if we set the nbreaks argument. Use
  # RColorBrewer::brewer.pal.info to see some of the available color palettes in
  # R.
  ggcorr(nbreaks = 7, palette = &quot;RdBu&quot;)</code></pre>
<p><img src="RModule7_files/figure-html/corr-1.png" width="672" /></p>
</div>
<div id="questions-1" class="section level2">
<h2>Questions</h2>
<p><strong>Using the <code>correlate()</code> and <code>fashion()</code>
functions in <code>corrr</code>, create a Pearson’s <em>r</em>
correlation matrix of your filtered data. When filtering and selecting
columns, choose different/additional columns to compare (don’t just use
the ones in the Lab!). Provide the matrix and the correlogram (and your
R code used to make it!) in your R Markdown report. Identify the
strongest and weakest correlation coefficients where r <span
class="math inline">\(&lt;\)</span> 1.</strong></p>
</div>
</div>
<div id="linear-regression" class="section level1">
<h1>Linear Regression</h1>
<p>We’ve assessed the covariance visually and computationally. There
seems to be a strong, positive, and linear relationship between
manufacturing and population. Now, we can run a regression – what R was
really made to do – and explore this relationship further.</p>
<p>Running a linear regression in R is done with the linear model
(<code>lm()</code>) function, and its primary argument is written in
“formula syntax”, a special way of describing a formula. Formula syntax
looks like <code>y ~ x</code>, which is read as “y as a function of x”.
In the context of <code>lm()</code>, this means our dependent variable
<code>y</code> is a function of our independent variable
<code>x</code>.</p>
<pre class="r"><code>model &lt;- lm(MNEM2000 ~ POP2000, data = NC)
model</code></pre>
<pre><code>## 
## Call:
## lm(formula = MNEM2000 ~ POP2000, data = NC)
## 
## Coefficients:
## (Intercept)      POP2000  
##   1.891e+03    7.294e-02</code></pre>
<p>What we get is the classic equation of a line: <span
class="math inline">\(y = mx+b\)</span>, where <span
class="math inline">\(b\)</span> is our <code>(Intercept)</code> and
<span class="math inline">\(m\)</span> is our <code>POP2000</code>
coefficient. We can plot this in R on top of a scatter plot:</p>
<pre class="r"><code>model &lt;- lm(MNEM2000 ~ POP2000, data = NC)


plot(MNEM2000 ~ POP2000, data = NC)
abline(model)</code></pre>
<p><img src="RModule7_files/figure-html/lm-base-1.png" width="672" /></p>
<p>Or alternatively in <code>ggplot2</code>, with
<code>stat_smooth()</code>:</p>
<pre class="r"><code>library(ggplot2)

ggplot(NC, aes(x = POP2000, y = MNEM2000)) +
  geom_point() + 
  # `se = FALSE` means we don&#39;t plot a confidence interval around our line.
  stat_smooth(method = &quot;lm&quot;, se = FALSE)</code></pre>
<p><img src="RModule7_files/figure-html/lm-ggplot2-1.png" width="672" /></p>
<p>Now we have our regression line. However, we need to measure whether
it’s actually a good fit. We can use the <span
class="math inline">\(r^2\)</span> “goodness of fit measure” to
determine this.</p>
<pre class="r"><code>s &lt;- summary(model)

s</code></pre>
<pre><code>## 
## Call:
## lm(formula = MNEM2000 ~ POP2000, data = NC)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -10836.5  -2051.7   -973.5    912.1  16942.0 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 1.891e+03  5.368e+02   3.522 0.000652 ***
## POP2000     7.294e-02  4.171e-03  17.485  &lt; 2e-16 ***
## ---
## Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1
## 
## Residual standard error: 4281 on 98 degrees of freedom
## Multiple R-squared:  0.7573, Adjusted R-squared:  0.7548 
## F-statistic: 305.7 on 1 and 98 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Here, it’s the <code>Multiple R-squared</code> value. If we assign
the summary of our linear model to an object, e.g. <code>s</code>, we
can return the r-squared (and by extension, other attributes) with
<code>s$r.squared</code>, which gives us 0.7572621.</p>
<p>Larger <span class="math inline">\(r^2\)</span> values for a
bivariate regression line indicate that more of the variance in
<code>y</code> is explained by the variance in <code>x</code>. In other
words, this means that roughly 76% of manufacturing in each county is
explained by the population of that county; this also means that <span
class="math inline">\(\approx\)</span> 24% of variance is
<strong>not</strong> explained by population. There’s clearly more to
the story, such as how manufacturing is distributed geographically
around the state in a certain way, but we’ve now established that
population is an important part of our model.</p>
</div>
<div id="residuals" class="section level1">
<h1>Residuals</h1>
<p>Next, we should consider our other “goodness of fit” measure. We need
to assess how the differences between the manufacturing values predicted
by the regression line differ from the actual observed values. These
differences are called residuals, and we can call a list of the
residuals in R:</p>
<pre class="r"><code>model &lt;- lm(MNEM2000 ~ POP2000, data = NC)


head(model$residuals)</code></pre>
<pre><code>##          1          2          3          4          5          6 
##  -640.8329 -1265.6555  3589.3870 -2683.4450 -1682.8900 -1520.8310</code></pre>
<p>Examining the results tells us a lot about our regression; for most
regressions, the ideal is to have the residuals symmetrically
distributed around the mean of the residuals, which should be close to
0. When the mean of the residuals is close to 0, and the residuals are
normally distributed around this mean, it indicates that when our
regression misses its prediction, we’re missing both “above” and “below”
the actual value (which is good).</p>
<p>Think of it like target shooting: a good regression line is going to
hit the bulls-eye some of the time, but not all the time. When it misses
the bulls-eye, we want it to miss both high and low, left and right of
it evenly. If we consistently missed below the bulls-eye, for example,
we’d have a clue about a systematic problem in our estimate (in the
target shooting example, perhaps we’ve forgotten to account for the wind
direction or the speed of our arrow).</p>
<div id="questions-2" class="section level2">
<h2>Questions</h2>
<ol start="3" style="list-style-type: decimal">
<li>Calculate and report the mean value of the set of residuals from
your regression results (in other words, the mean difference between
predicted and observed values of our dependent variable). Next, create
an absolute value histogram of the residuals from your regression using
the ‘fd’ breaks method. Add the mean value of the residuals to your plot
as a vertical line. Include a legend, appropriate axis labels, and a
title. As always, provide your R code to do this in your R Markdown
report.</li>
</ol>
<p>We now have two “goodness of fit” measures to help us decide if our
prediction line fits our data well. A higher <span
class="math inline">\(r^2\)</span> value in combination with a lower
standard error estimate gives us some confidence that our line of fit is
suitable.</p>
</div>
</div>
<div id="geographic-distribution" class="section level1">
<h1>Geographic Distribution</h1>
<p>Geographers work with residuals quite a bit, but why? Just as we want
to know how are “misses” are distributed around the regression line, we
also want to know how the misses are distributed across geographic
space. If we see evidence of spatial dependence in our regressions, we
have reason to think that our model might perform well in some
geographic areas and poorly in others. To do this, we start with
something called a “residual map”. We’ll do more with the residuals
later, but for now, let’s add the residuals to our shapefile attribute
table, then create a simple map that visualizes the distribution of the
residuals around the state.</p>
<p>We can append the residuals of our model to our original Shapefile
quite easily:</p>
<pre class="r"><code>NC$Residuals &lt;- model$residuals</code></pre>
<p>If you want to save your shapefile, use the <code>write_sf()</code>
function from <code>sf</code>:</p>
<pre class="r"><code>write_sf(NC, &quot;NC.shp&quot;)</code></pre>
<div id="questions-3" class="section level2">
<h2>Questions:</h2>
<ol start="4" style="list-style-type: decimal">
<li>Create a choropleth map of the residuals of the regression with an
appropriate legend and title. You may explore the spatial patterning fo
residuals through altering your break methods and number of categories,
but for your final map, use 4 classes and a quartiles classification
theme. Why? This utilizes the median and 1st/3rd quartiles as
breakpoints. In other words, our map will be connected to a measure of
central tendency of the residuals, which can aid interpretation. Explain
in writing if there is visual evidence for spatial dependence in the
map. Provide the map and your R code.</li>
</ol>
<p>You can use any R package you wish to generate this map, but I
recommend <code>tmap</code>, as it’s designed to work well with
choropleth mapping.</p>
</div>
</div>

<p>&copy; 2022 Maggie Sugg & Harrison Brown. v.1.0.0</p>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
